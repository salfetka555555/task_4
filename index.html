<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Bank Card Form</title>
    <style>
        body { font-family: Arial, sans-serif; }
        form { max-width: 500px; margin: 0 auto; }
        label { display: block; margin-bottom: 10px; }
        input[type=text], select { 
            width: 100%; 
            padding: 10px; 
            margin-bottom: 15px; 
            border: 1px solid #ccc; 
            border-radius: 4px; 
        }
        .expiry-container { display: flex; gap: 10px; }
        .expiry-container select { flex: 1; }
        button { 
            background-color: #4CAF50; 
            color: white; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 4px; 
            cursor: pointer; 
            width: 100%; 
        }
        .error { color: red; font-size: 14px; margin-top: -10px; margin-bottom: 10px; }
    </style>
</head>
<body>
<h2>Форма банковских данных</h2>
<form id="cardForm">
    <label for="card-number">Номер карты:</label>
    <input type="text" id="card-number" name="card_number" placeholder="XXXX XXXX XXXX XXXX" maxlength="19" />
    <div class="error" id="cardError"></div>

    <label for="expiry-date">Срок действия:</label>
    <div class="expiry-container">
        <select id="month" name="month">
            <option value="">Месяц...</option>
        </select>
        <select id="year" name="year">
            <option value="">Год...</option>
        </select>
    </div>
    <div class="error" id="expiryError"></div>

    <label for="cvv-code">CVV-код:</label>
    <input type="text" id="cvv-code" name="cvv_code" placeholder="XXX" maxlength="3" />
    <div class="error" id="cvvError"></div>

    <label for="holder-name">Имя владельца:</label>
    <input type="text" id="holder-name" name="holder_name" placeholder="Ваше полное имя" />
    <div class="error" id="holderError"></div>

    <button type="submit">Отправить</button>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const monthSelect = document.getElementById('month');
        const yearSelect = document.getElementById('year');
        const currentYear = new Date().getFullYear();

        for (let i = 1; i <= 12; i++) {
            const option = document.createElement('option');
            option.value = i.toString().padStart(2, '0');
            option.textContent = i.toString().padStart(2, '0');
            monthSelect.appendChild(option);
        }

        for (let i = 0; i <= 10; i++) {
            const option = document.createElement('option');
            option.value = (currentYear + i).toString();
            option.textContent = (currentYear + i).toString();
            yearSelect.appendChild(option);
        }
    });

    document.getElementById('card-number').addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        value = value.replace(/(.{4})/g, '$1 ').trim();
        e.target.value = value.substring(0, 19);
    });

    document.getElementById('cvv-code').addEventListener('input', function(e) {
        e.target.value = e.target.value.replace(/\D/g, '').substring(0, 3);
    });

    document.getElementById('holder-name').addEventListener('input', function(e) {
        e.target.value = e.target.value.replace(/[^a-zA-Zа-яА-ЯёЁ\s]/g, '');
    });

    document.getElementById('cardForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const errors = {};
        
        const cardNumber = document.getElementById('card-number').value.replace(/\s/g, '');
        if (!/^\d{16}$/.test(cardNumber)) {
            errors.card = 'Номер карты должен содержать 16 цифр';
        }
        
        const month = document.getElementById('month').value;
        const year = document.getElementById('year').value;
        if (!month || !year) {
            errors.expiry = 'Выберите месяц и год';
        } else if (parseInt(year) === new Date().getFullYear() && parseInt(month) < new Date().getMonth() + 1) {
            errors.expiry = 'Карта просрочена';
        }
        
        const cvv = document.getElementById('cvv-code').value;
        if (!/^\d{3}$/.test(cvv)) {
            errors.cvv = 'CVV должен содержать 3 цифры';
        }
        
        const holderName = document.getElementById('holder-name').value.trim();
        if (!holderName || holderName.length < 3) {
            errors.holder = 'Введите полное имя';
        }
        
        document.querySelectorAll('.error').forEach(el => el.textContent = '');
        
        if (errors.card) document.getElementById('cardError').textContent = errors.card;
        if (errors.expiry) document.getElementById('expiryError').textContent = errors.expiry;
        if (errors.cvv) document.getElementById('cvvError').textContent = errors.cvv;
        if (errors.holder) document.getElementById('holderError').textContent = errors.holder;
        
        if (Object.keys(errors).length === 0) {
            const formData = {
                card_number: cardNumber,
                month: month,
                year: year,
                cvv_code: cvv,
                holder_name: holderName
            };
            
            console.log('Данные для отправки:', formData);
            alert('Форма успешно отправлена!\nПроверьте консоль для просмотра данных.');
        }
    });
</script>
</body>
</html>
